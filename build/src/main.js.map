{"version":3,"sources":["../../src/main.js"],"names":["instance","options","rootId","pseudoStatesToForce","length","ruleMatches","normalizedResults","console","log","JSON","stringify","close","error","main"],"mappings":";;;;;;AACA;;AACA;;AACA;;;;;;;;AAEA;;;;uDAGe,iBAAqBA,QAArB,EAA+BC,OAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AACb;;AADa;AAAA;AAAA,mBAKkB,iCAAkBD,QAAlB,CALlB;;AAAA;AAKLE,kBALK;;AAAA,iBAQPD,QAAQE,mBAAR,CAA4BC,MARrB;AAAA;AAAA;AAAA;;AAAA;AAAA,mBASH,oCAAkBJ,QAAlB,EAA4BE,MAA5B,EAAoCD,OAApC,CATG;;AAAA;AAAA;AAAA,mBAa4B,gCAAiBD,QAAjB,EAA2BE,MAA3B,EAAmCD,OAAnC,CAb5B;;AAAA;AAaLI,uBAbK;AAAA;AAAA,mBAgBkC,2BAAgBL,QAAhB,EAA0BC,OAA1B,EAAmCI,WAAnC,CAhBlC;;AAAA;AAgBLC,6BAhBK;;AAiBXC,oBAAQC,GAAR,CAAYC,KAAKC,SAAL,CAAeJ,iBAAf,EAAkC,IAAlC,EAAwC,CAAxC,CAAZ;;AAEAN,qBAASW,KAAT;AAnBW;AAAA;;AAAA;AAAA;AAAA;;AAqBXJ,oBAAQK,KAAR,CAAc,yBAAd;AACAZ,qBAASW,KAAT;;AAtBW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;WAAeE,I;;;;SAAAA,I","file":"main.js","sourcesContent":["// @flow\nimport { applyPseudoStates } from './chrome/preparePage';\nimport { getElementStyles, getDocumentRootId } from './chrome/elements';\nimport diffRuleMatches from './diff/processDiff';\n\n/**\n * Function to execute once the page loads in Canary.\n */\nexport default async function main (instance, options) {\n  debugger;\n\n  try {\n    // Get root node\n    const rootId: number = await getDocumentRootId(instance);\n\n    // Apply pseudo-states\n    if (options.pseudoStatesToForce.length) {\n      await applyPseudoStates(instance, rootId, options);\n    }\n\n    // Get element styles\n    const ruleMatches: RuleMatch[] = await getElementStyles(instance, rootId, options);\n\n    // Diff everything\n    const normalizedResults: DiffResults = await diffRuleMatches(instance, options, ruleMatches);\n    console.log(JSON.stringify(normalizedResults, null, 2));\n\n    instance.close();\n  } catch (err) {\n    console.error('Error in main function:', err);\n    instance.close();\n  }\n}\n"]}